<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Teamday 2025 | Montagsmaler</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- React & ReactDOM -->
    <script type="importmap">
    {
      "imports": {
        "react": "https://esm.sh/react@18.2.0",
        "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
        "firebase/app": "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js",
        "firebase/firestore": "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js",
        "firebase/auth": "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js"
      }
    }
    </script>
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <style>
        @font-face {
            font-family: 'TeleGrotesk';
            src: local('Arial'); 
        }
        body {
            font-family: 'TeleGrotesk', sans-serif;
            overflow-x: hidden; /* Prevent accidental horizontal scroll */
        }
        .touch-none {
            touch-action: none;
        }
        /* Custom Animations */
        @keyframes crashZoom { 
            0% { transform: scale(1); opacity: 1; } 
            80% { opacity: 1; } 
            100% { transform: scale(50); opacity: 0; } 
        }
        @keyframes slideDown { 
            from { opacity: 0; transform: translateY(-20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        .animate-slideDown { 
            animation: slideDown 0.5s ease-out forwards; 
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">
    <div id="root"></div>

    <script type="text/babel" data-type="module">
        import React, { useState, useRef, useEffect } from 'react';
        import { createRoot } from 'react-dom/client';
        import { initializeApp } from 'firebase/app';
        import { 
          getFirestore, collection, doc, onSnapshot, 
          setDoc, addDoc, query, orderBy, 
          serverTimestamp 
        } from 'firebase/firestore';
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from 'firebase/auth';

        // --- ICONS (Inline SVGs) ---
        const Icon = ({ path, className, size = 24 }) => (
            <svg width={size} height={size} viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );
        const Icons = {
            Play: (p) => <Icon {...p} path={<polygon points="5 3 19 12 5 21 5 3"></polygon>} />,
            Pause: (p) => <Icon {...p} path={<><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></>} />,
            RefreshCw: (p) => <Icon {...p} path={<><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></>} />,
            Eraser: (p) => <Icon {...p} path={<path d="M2.9 8.183l9.9 9.9 8.183-8.182a2.121 2.121 0 0 0 0-3L11.084.586a2.121 2.121 0 0 0-3 0L2.9 5.182a2.121 2.121 0 0 0 0 3z"></path>} />,
            Monitor: (p) => <Icon {...p} path={<><rect x="2" y="3" width="20" height="14" rx="2" ry="2"></rect><line x1="8" y1="21" x2="16" y2="21"></line><line x1="12" y1="17" x2="12" y2="21"></line></>} />,
            Edit3: (p) => <Icon {...p} path={<path d="M12 20h9M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>} />,
            Settings: (p) => <Icon {...p} path={<circle cx="12" cy="12" r="3"></circle>} />,
            Shield: (p) => <Icon {...p} path={<path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>} />
        };

        // --- KONFIGURATION ---
        
        // Deine Live-Daten:
        const FIREBASE_CONFIG = {
          apiKey: "AIzaSyDUEXOxFFCfydAgBDgnnLPLANlwCZKMcsU",
          authDomain: "teamday-8c040.firebaseapp.com",
          projectId: "teamday-8c040",
          storageBucket: "teamday-8c040.firebasestorage.app",
          messagingSenderId: "923000585943",
          appId: "1:923000585943:web:58a5bab85fcb6715313a92",
          measurementId: "G-LWJJVM0W4T"
        };

        // Fallback Logik: Falls die Config oben leer wäre, würde er versuchen
        // eine Umgebungsvariable zu nutzen. Da wir jetzt echte Daten haben, 
        // wird immer FIREBASE_CONFIG genommen.
        const FINAL_CONFIG = (FIREBASE_CONFIG.apiKey !== "HIER_API_KEY_EINFÜGEN") 
            ? FIREBASE_CONFIG 
            : (typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : null);

        const APP_ID = typeof __app_id !== 'undefined' ? __app_id : 'teamday-2025-prod';
        const INITIAL_TOKEN = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;

        const COLORS = {
            magenta: '#E20074',
            dark: '#161616', 
            white: '#FFFFFF'
        };

        const WORD_CATEGORIES = {
            easy: ["Homeoffice", "Kaffeemaschine", "Router", "Smartphone", "Maus", "Headset", "Laptop", "MagentaTV", "Glasfaser", "5G-Mast"],
            medium: ["Videokonferenz", "Datenschutz", "Cloud-Speicher", "Funkloch", "Warteschleife", "Smart Home", "Techniker", "Bandbreite", "Serverraum"],
            hard: ["Chefin im Bikini", "Kabelsalat", "Meeting im Pyjama", "Stummgeschaltet", "Katze auf Tastatur", "Techniker kommt", "Update Zwang", "VR Brille", "Daten-Stau", "Passwort weg"]
        };

        function App() {
            // --- STATE ---
            const [user, setUser] = useState(null);
            const [role, setRole] = useState(null); 
            const [phase, setPhase] = useState('intro'); 
            const [isLoading, setIsLoading] = useState(true); 
            
            const [gameState, setGameState] = useState({
                activeTeam: 'A',
                scoreA: 0,
                scoreB: 0,
                timeLeft: 60,
                timerActive: false,
                currentWord: '', 
                lastClear: 0 
            });

            const [brushColor, setBrushColor] = useState(COLORS.dark);
            const [brushSize, setBrushSize] = useState(4);
            const [isDrawing, setIsDrawing] = useState(false);
            
            const canvasRef = useRef(null);
            const contextRef = useRef(null);
            const dbRef = useRef(null);
            const localStrokesBuffer = useRef([]);

            // --- FIREBASE INIT ---
            useEffect(() => {
                const initFirebase = async () => {
                    if (!FINAL_CONFIG) {
                        console.warn("Keine Firebase Config gefunden. Demo-Modus.");
                        setIsLoading(false);
                        return;
                    }
                    try {
                        const app = initializeApp(FINAL_CONFIG);
                        const auth = getAuth(app);
                        const db = getFirestore(app);
                        dbRef.current = db;

                        if (INITIAL_TOKEN) {
                            await signInWithCustomToken(auth, INITIAL_TOKEN);
                        } else {
                            await signInAnonymously(auth);
                        }
                        
                        onAuthStateChanged(auth, (u) => {
                            setUser(u);
                            setIsLoading(false);
                        });
                    } catch (err) {
                        console.error("Firebase Init Error:", err);
                        setIsLoading(false); 
                    }
                };
                initFirebase();
            }, []);

            // --- DATA SYNC ---
            useEffect(() => {
                if (!user || !dbRef.current) return;
                const db = dbRef.current;

                // Sync Game State
                const stateDocRef = doc(db, 'artifacts', APP_ID, 'public', 'data', 'gamestate_doc', 'state');
                setDoc(stateDocRef, { initialized: true }, { merge: true }).catch(() => {});

                const unsubState = onSnapshot(stateDocRef, (docSnap) => {
                    if (docSnap.exists()) {
                        const data = docSnap.data();
                        setGameState(prev => ({ ...prev, ...data }));
                        if (data.lastClear && data.lastClear !== gameState.lastClear) {
                           clearCanvasLocal();
                        }
                    }
                });

                // Sync Strokes
                const strokesQuery = query(collection(db, 'artifacts', APP_ID, 'public', 'data', 'strokes_col'), orderBy('timestamp', 'asc'));
                const unsubStrokes = onSnapshot(strokesQuery, (snapshot) => {
                    snapshot.docChanges().forEach((change) => {
                        if (change.type === "added") {
                            const stroke = change.doc.data();
                            if (role !== 'player' || stroke.userId !== user.uid) {
                                drawStrokeRemote(stroke);
                            }
                        }
                    });
                });

                return () => { unsubState(); unsubStrokes(); };
            }, [user, role]); 

            // --- CANVAS LOGIC ---
            useEffect(() => {
                if (phase === 'game' && canvasRef.current) {
                    const canvas = canvasRef.current;
                    const container = canvas.parentElement;
                    const dpr = window.devicePixelRatio || 1;
                    const rect = container.getBoundingClientRect();
                    
                    canvas.width = rect.width * dpr;
                    canvas.height = 500 * dpr;
                    canvas.style.width = `${rect.width}px`;
                    canvas.style.height = "500px";

                    const ctx = canvas.getContext("2d");
                    ctx.scale(dpr, dpr);
                    ctx.lineCap = "round";
                    ctx.lineJoin = "round";
                    contextRef.current = ctx;
                    ctx.strokeStyle = brushColor;
                    ctx.lineWidth = brushSize;
                }
            }, [phase]); 

            useEffect(() => {
                if(contextRef.current) {
                    contextRef.current.strokeStyle = brushColor;
                    contextRef.current.lineWidth = brushSize;
                }
            }, [brushColor, brushSize]);

            const drawStrokeRemote = (stroke) => {
                const ctx = contextRef.current;
                if (!ctx || !stroke.points || stroke.points.length < 2) return;
                ctx.save();
                ctx.strokeStyle = stroke.color;
                ctx.lineWidth = stroke.size;
                ctx.beginPath();
                ctx.moveTo(stroke.points[0].x, stroke.points[0].y);
                for (let i = 1; i < stroke.points.length; i++) {
                    ctx.lineTo(stroke.points[i].x, stroke.points[i].y);
                }
                ctx.stroke();
                ctx.restore();
            };

            const clearCanvasLocal = () => {
                if (canvasRef.current && contextRef.current) {
                    const w = canvasRef.current.width / (window.devicePixelRatio || 1);
                    const h = canvasRef.current.height / (window.devicePixelRatio || 1);
                    contextRef.current.clearRect(0, 0, w, h);
                }
            };

            const getCoords = (e) => {
                const canvas = canvasRef.current;
                const rect = canvas.getBoundingClientRect();
                const clientX = e.nativeEvent.touches ? e.nativeEvent.touches[0].clientX : e.nativeEvent.clientX;
                const clientY = e.nativeEvent.touches ? e.nativeEvent.touches[0].clientY : e.nativeEvent.clientY;
                return { x: clientX - rect.left, y: clientY - rect.top };
            };

            const startDrawing = (e) => {
                if (role !== 'player') return;
                const { x, y } = getCoords(e);
                contextRef.current.beginPath();
                contextRef.current.moveTo(x, y);
                setIsDrawing(true);
                localStrokesBuffer.current = [{ x, y }];
            };

            const draw = (e) => {
                if (!isDrawing || role !== 'player') return;
                const { x, y } = getCoords(e);
                contextRef.current.lineTo(x, y);
                contextRef.current.stroke();
                localStrokesBuffer.current.push({ x, y });
            };

            const stopDrawing = async () => {
                if (!isDrawing || role !== 'player') return;
                contextRef.current.closePath();
                setIsDrawing(false);
                if (user && dbRef.current && localStrokesBuffer.current.length > 1) {
                    const strokeData = {
                        userId: user.uid,
                        color: brushColor,
                        size: brushSize,
                        points: localStrokesBuffer.current,
                        timestamp: serverTimestamp()
                    };
                    addDoc(collection(dbRef.current, 'artifacts', APP_ID, 'public', 'data', 'strokes_col'), strokeData);
                }
                localStrokesBuffer.current = [];
            };

            // --- ADMIN ACTIONS ---
            const updateGameState = async (updates) => {
                if (!dbRef.current) return;
                await setDoc(doc(dbRef.current, 'artifacts', APP_ID, 'public', 'data', 'gamestate_doc', 'state'), updates, { merge: true });
            };
            const clearBoardGlobal = async () => {
                if (!dbRef.current) return;
                await updateGameState({ lastClear: Date.now() });
            };
            const generateWord = (diff) => {
                const list = WORD_CATEGORIES[diff];
                updateGameState({ currentWord: list[Math.floor(Math.random() * list.length)] });
            };
            
            // --- TIMER EFFECT ---
            useEffect(() => {
                let interval;
                if (gameState.timerActive && gameState.timeLeft > 0) {
                    interval = setInterval(() => {
                        if (role === 'admin') updateGameState({ timeLeft: gameState.timeLeft - 1 });
                    }, 1000);
                } else if (gameState.timeLeft === 0 && gameState.timerActive && role === 'admin') {
                    updateGameState({ timerActive: false });
                }
                return () => clearInterval(interval);
            }, [gameState.timerActive, gameState.timeLeft, role]);


            // --- RENDER ---
            if (phase === 'intro') {
                setTimeout(() => setPhase('lobby'), 3500);
                return (
                    <div className="fixed inset-0 bg-[#161616] overflow-hidden flex items-center justify-center z-50">
                        <div className="relative w-full h-full flex items-center justify-center" style={{ animation: 'crashZoom 3s cubic-bezier(0.7,0,1,1) forwards' }}>
                             <div className="absolute inset-0 opacity-80" style={{ backgroundImage: `url("data:image/svg+xml,%3Csvg width='80' height='80' viewBox='0 0 80 80' xmlns='http://www.w3.org/2000/svg'%3E%3Ctext x='5' y='20' font-family='monospace' font-weight='bold' font-size='18' fill='%23E20074' opacity='0.9'%3E1%3C/text%3E%3Ctext x='45' y='60' font-family='monospace' font-weight='bold' font-size='22' fill='%23ffffff' opacity='0.8'%3E0%3C/text%3E%3C/svg%3E")` }}></div>
                             <div className="relative z-10 flex flex-col items-center">
                                 <div className="bg-[#161616]/90 backdrop-blur-md p-10 rounded-3xl border border-[#E20074]/50 shadow-[0_0_80px_rgba(226,0,116,0.4)]">
                                     <img src="https://i.postimg.cc/gJVH7YL6/image-(23).png" className="w-40 h-auto mb-6 drop-shadow-[0_0_15px_rgba(226,0,116,0.8)] mx-auto" alt="Logo"/>
                                     <h1 className="text-6xl md:text-8xl font-bold text-white tracking-tighter text-center" style={{ fontFamily: 'TeleGrotesk' }}>TEAMDAY <span className="text-[#E20074]">2025</span></h1>
                                 </div>
                             </div>
                        </div>
                    </div>
                );
            }

            if (isLoading) {
                 return <div className="min-h-screen flex items-center justify-center bg-[#161616] text-white">Lade Verbindung...</div>;
            }

            if (phase === 'lobby') {
                return (
                    <div className="min-h-screen bg-[#161616] flex flex-col items-center justify-center p-4">
                        <div className="max-w-4xl w-full grid grid-cols-1 md:grid-cols-3 gap-6">
                            {[
                                { id: 'viewer', icon: Icons.Monitor, title: 'Präsentation', desc: 'Nur Spielbrett & Score', color: 'text-[#E20074]' },
                                { id: 'player', icon: Icons.Edit3, title: 'Teilnehmer', desc: 'Hier kannst du malen', color: 'text-green-500' },
                                { id: 'admin', icon: Icons.Settings, title: 'Controller', desc: 'Zeit, Punkte, Begriffe', color: 'text-blue-500' }
                            ].map(opt => (
                                <button key={opt.id} onClick={() => { setRole(opt.id); setPhase('game'); }} className="group bg-gray-800 hover:bg-gray-700 p-8 rounded-2xl border border-gray-700 hover:border-[#E20074] transition-all text-left">
                                    <opt.icon size={48} className={`${opt.color} mb-4 group-hover:scale-110 transition-transform`} />
                                    <h2 className="text-2xl font-bold text-white mb-2">{opt.title}</h2>
                                    <p className="text-gray-400 text-sm">{opt.desc}</p>
                                </button>
                            ))}
                        </div>
                         {/* Connection Status Indicator */}
                        <div className="mt-8 text-gray-500 text-sm flex items-center">
                            <div className={`w-2 h-2 rounded-full mr-2 ${user ? 'bg-green-500' : 'bg-red-500'}`}></div>
                            {user ? 'Online (Multiplayer Aktiv)' : 'Offline (Demo Modus - Prüfe Config)'}
                        </div>
                    </div>
                );
            }

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Header */}
                    <header className="bg-white shadow-md z-20 sticky top-0 border-b-4 border-[#E20074]">
                        <div className="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center">
                            <div className="flex items-center space-x-3">
                                <img src="https://i.postimg.cc/gJVH7YL6/image-(23).png" className="h-8 w-auto object-contain" alt="Logo"/>
                                <h1 className="text-xl font-bold tracking-tight text-gray-900 hidden md:block">TEAMDAY <span className="text-[#E20074]">2025</span></h1>
                            </div>
                            <div className="flex items-center space-x-4">
                                <div className={`flex items-center space-x-2 px-3 py-1 rounded-lg border-2 ${gameState.activeTeam === 'A' ? 'border-[#E20074] bg-pink-50' : 'border-transparent'}`}>
                                    <span className="font-bold text-gray-600">Grp A</span>
                                    <span className="text-xl font-bold text-[#E20074]">{Number(gameState.scoreA)}</span>
                                </div>
                                <div className="text-gray-300">vs</div>
                                <div className={`flex items-center space-x-2 px-3 py-1 rounded-lg border-2 ${gameState.activeTeam === 'B' ? 'border-[#E20074] bg-pink-50' : 'border-transparent'}`}>
                                    <span className="font-bold text-gray-600">Grp B</span>
                                    <span className="text-xl font-bold text-[#E20074]">{Number(gameState.scoreB)}</span>
                                </div>
                            </div>
                        </div>
                    </header>

                    <main className="flex-grow p-4 md:p-6 max-w-7xl mx-auto w-full grid grid-cols-1 lg:grid-cols-4 gap-6">
                        
                        {/* Sidebar */}
                        <div className="lg:col-span-1 space-y-6 order-2 lg:order-1">
                            {/* Timer */}
                            <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 flex flex-col items-center justify-center">
                                <div className="relative w-24 h-24 flex items-center justify-center">
                                    <svg className="w-full h-full transform -rotate-90">
                                        <circle cx="48" cy="48" r="44" stroke="#f3f4f6" strokeWidth="6" fill="none" />
                                        <circle cx="48" cy="48" r="44" stroke={gameState.timeLeft < 10 ? '#E20074' : '#161616'} strokeWidth="6" fill="none" strokeDasharray={276} strokeDashoffset={276 - (276 * Number(gameState.timeLeft || 60)) / 60} className="transition-all duration-1000 ease-linear" />
                                    </svg>
                                    <div className="absolute inset-0 flex items-center justify-center flex-col">
                                        <span className={`text-3xl font-bold ${gameState.timeLeft < 10 ? 'text-[#E20074] animate-pulse' : 'text-gray-800'}`}>{Number(gameState.timeLeft)}</span>
                                    </div>
                                </div>
                                {role === 'admin' && (
                                    <div className="flex w-full space-x-2 mt-4">
                                        <button onClick={() => updateGameState({ timerActive: !gameState.timerActive })} className={`flex-1 flex items-center justify-center py-2 rounded-lg font-medium transition-colors text-white ${gameState.timerActive ? 'bg-gray-400' : 'bg-[#E20074]'}`}>
                                            {gameState.timerActive ? <Icons.Pause size={16} /> : <Icons.Play size={16} />}
                                        </button>
                                        <button onClick={() => updateGameState({ timeLeft: 60, timerActive: false })} className="flex-1 flex items-center justify-center bg-gray-200 hover:bg-gray-300 text-gray-800 py-2 rounded-lg">Reset</button>
                                    </div>
                                )}
                            </div>

                            {/* Player Tools */}
                            {role === 'player' && (
                                <div className="bg-white p-6 rounded-2xl shadow-sm border border-gray-100 animate-slideDown">
                                    <h3 className="text-sm font-bold text-gray-400 uppercase mb-4">Werkzeuge</h3>
                                    <div className="flex justify-between mb-6">
                                        {[COLORS.dark, COLORS.magenta, '#1E40AF', '#10B981', '#F59E0B'].map(c => (
                                            <button key={c} onClick={() => setBrushColor(c)} className={`w-8 h-8 rounded-full border-2 ${brushColor === c ? 'border-gray-900 scale-110 ring-2' : 'border-transparent'}`} style={{ backgroundColor: c }} />
                                        ))}
                                    </div>
                                    <input type="range" min="2" max="20" value={brushSize} onChange={(e) => setBrushSize(parseInt(e.target.value))} className="w-full h-2 bg-gray-200 rounded-lg accent-[#E20074] mb-6" />
                                    <div className="grid grid-cols-2 gap-2">
                                        <button onClick={() => setBrushColor('#FFFFFF')} className="flex items-center justify-center px-4 py-2 border rounded-lg hover:bg-gray-50"><Icons.Eraser size={16} className="mr-2" /> Radierer</button>
                                        <button onClick={clearBoardGlobal} className="flex items-center justify-center px-4 py-2 border rounded-lg hover:bg-red-50 text-red-500"><Icons.RefreshCw size={16} className="mr-2" /> Löschen</button>
                                    </div>
                                </div>
                            )}

                            {/* Admin Tools */}
                            {role === 'admin' && (
                                <div className="bg-gradient-to-b from-gray-900 to-gray-800 text-white p-6 rounded-2xl shadow-lg animate-slideDown">
                                    <h3 className="text-[#E20074] font-bold text-sm uppercase mb-4 flex items-center"><Icons.Shield size={16} className="mr-2"/> Admin</h3>
                                    <div className="mb-6 border-b border-gray-700 pb-6">
                                        <div className="flex space-x-2 mb-3">
                                            {['easy', 'medium', 'hard'].map(d => (
                                                <button key={d} onClick={() => generateWord(d)} className="flex-1 bg-gray-700 hover:bg-gray-600 py-1 rounded text-xs capitalize">{d}</button>
                                            ))}
                                        </div>
                                        <div className="bg-black/30 p-3 rounded text-center min-h-[50px] flex flex-col justify-center">
                                            <span className="text-xl font-bold text-white">{String(gameState.currentWord || '...')}</span>
                                        </div>
                                    </div>
                                    <div className="grid grid-cols-2 gap-2 mb-4">
                                        <button onClick={() => updateGameState({ scoreA: (gameState.scoreA||0)+1, activeTeam: 'B', timerActive: false })} className="py-2 bg-gray-700 hover:bg-[#E20074] rounded text-sm">Punkt A</button>
                                        <button onClick={() => updateGameState({ scoreB: (gameState.scoreB||0)+1, activeTeam: 'A', timerActive: false })} className="py-2 bg-gray-700 hover:bg-[#E20074] rounded text-sm">Punkt B</button>
                                    </div>
                                    <button onClick={clearBoardGlobal} className="w-full py-2 border border-red-500/50 text-red-400 hover:bg-red-500 hover:text-white rounded text-sm transition-colors">Board leeren</button>
                                </div>
                            )}
                        </div>

                        {/* Main Canvas Area */}
                        <div className="lg:col-span-3 flex flex-col order-1 lg:order-2">
                            <div className="bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden relative touch-none" style={{ height: '500px' }}>
                                <canvas
                                    ref={canvasRef}
                                    onMouseDown={startDrawing}
                                    onMouseUp={stopDrawing}
                                    onMouseMove={draw}
                                    onTouchStart={startDrawing}
                                    onTouchEnd={stopDrawing}
                                    onTouchMove={draw}
                                    className="w-full h-full cursor-crosshair touch-none"
                                />
                                {role !== 'player' && <div className="absolute inset-0 z-10 pointer-events-none"></div>}
                                {role === 'viewer' && !gameState.timerActive && (
                                    <div className="absolute inset-0 flex items-center justify-center pointer-events-none">
                                        <div className="bg-white/80 backdrop-blur px-6 py-3 rounded-full shadow-lg border border-gray-100 text-gray-500">Warte auf Start...</div>
                                    </div>
                                )}
                            </div>
                        </div>
                    </main>
                </div>
            );
        }

        const root = createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
